nohup: ignoring input
[dotenv@17.2.3] injecting env (12) from .env -- tip: ğŸ”‘ add access controls to secrets: https://dotenvx.com/ops
âš ï¸ Google Cloud Speech-to-Text not configured, using fallback
âœ… Telegram bot configured
(node:14276) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
ğŸš¨ Telegram polling error: FatalError: EFATAL: AggregateError
    at new RequestError (/home/ken/neura_dazzle/dazzle/app/server/node_modules/request-promise-core/lib/errors.js:14:15)
    at plumbing.callback (/home/ken/neura_dazzle/dazzle/app/server/node_modules/request-promise-core/lib/plumbing.js:87:29)
    at Request.RP$callback [as _callback] (/home/ken/neura_dazzle/dazzle/app/server/node_modules/request-promise-core/lib/plumbing.js:46:31)
    at self.callback (/home/ken/neura_dazzle/dazzle/app/server/node_modules/request/request.js:185:22)
    at Request.emit (node:events:508:20)
    at Request.onRequestError (/home/ken/neura_dazzle/dazzle/app/server/node_modules/request/request.js:877:8)
    at ClientRequest.emit (node:events:508:20)
    at emitErrorEvent (node:_http_client:108:11)
    at TLSSocket.socketErrorListener (node:_http_client:575:5)
    at TLSSocket.emit (node:events:508:20)
    at emitErrorNT (node:internal/streams/destroy:170:8)
    at emitErrorCloseNT (node:internal/streams/destroy:129:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at plumbing.init (/home/ken/neura_dazzle/dazzle/app/server/node_modules/request-promise-core/lib/plumbing.js:36:28)
    at Request.RP$initInterceptor [as init] (/home/ken/neura_dazzle/dazzle/app/server/node_modules/request-promise-core/configure/request2.js:41:27)
    at new Request (/home/ken/neura_dazzle/dazzle/app/server/node_modules/request/request.js:127:8)
    at request (/home/ken/neura_dazzle/dazzle/app/server/node_modules/request/index.js:53:10)
    at TelegramBot._request (/home/ken/neura_dazzle/dazzle/app/server/node_modules/node-telegram-bot-api/src/telegram.js:286:12)
From previous event:
    at TelegramBot._request (/home/ken/neura_dazzle/dazzle/app/server/node_modules/node-telegram-bot-api/src/telegram.js:300:15)
    at TelegramBot.getUpdates (/home/ken/neura_dazzle/dazzle/app/server/node_modules/node-telegram-bot-api/src/telegram.js:794:17)
    at TelegramBotPolling._getUpdates (/home/ken/neura_dazzle/dazzle/app/server/node_modules/node-telegram-bot-api/src/telegramPolling.js:190:21)
    at TelegramBotPolling._polling (/home/ken/neura_dazzle/dazzle/app/server/node_modules/node-telegram-bot-api/src/telegramPolling.js:102:8)
    at TelegramBotPolling.start (/home/ken/neura_dazzle/dazzle/app/server/node_modules/node-telegram-bot-api/src/telegramPolling.js:48:17)
    at TelegramBot.startPolling (/home/ken/neura_dazzle/dazzle/app/server/node_modules/node-telegram-bot-api/src/telegram.js:406:26)
    at new TelegramBot (/home/ken/neura_dazzle/dazzle/app/server/node_modules/node-telegram-bot-api/src/telegram.js:177:14)
    at Object.<anonymous> (/home/ken/neura_dazzle/dazzle/app/server/index.js:208:17)
    at Module._compile (node:internal/modules/cjs/loader:1803:14)
    at Object..js (node:internal/modules/cjs/loader:1934:10)
    at Module.load (node:internal/modules/cjs/loader:1524:32)
    at Module._load (node:internal/modules/cjs/loader:1326:12)
    at TracingChannel.traceSync (node:diagnostics_channel:328:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:245:24)
    at Module.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:154:5)
    at node:internal/main/run_main_module:33:47 {
  code: 'EFATAL'
}
âŒ Database connection error: MongoServerSelectionError: connect ECONNREFUSED ::1:27017, connect ECONNREFUSED 127.0.0.1:27017
    at Topology.selectServer (/home/ken/neura_dazzle/dazzle/app/server/node_modules/mongodb/lib/sdam/topology.js:347:38)
    at async Topology._connect (/home/ken/neura_dazzle/dazzle/app/server/node_modules/mongodb/lib/sdam/topology.js:220:28)
    at async Topology.connect (/home/ken/neura_dazzle/dazzle/app/server/node_modules/mongodb/lib/sdam/topology.js:171:13)
    at async topologyConnect (/home/ken/neura_dazzle/dazzle/app/server/node_modules/mongodb/lib/mongo_client.js:258:17)
    at async MongoClient._connect (/home/ken/neura_dazzle/dazzle/app/server/node_modules/mongodb/lib/mongo_client.js:271:13)
    at async MongoClient.connect (/home/ken/neura_dazzle/dazzle/app/server/node_modules/mongodb/lib/mongo_client.js:196:13)
    at async connectDatabase (/home/ken/neura_dazzle/dazzle/app/server/database.js:32:5)
    at async startServer (/home/ken/neura_dazzle/dazzle/app/server/index.js:2091:5) {
  errorLabelSet: Set(0) {},
  reason: TopologyDescription {
    type: 'Unknown',
    servers: Map(1) { 'localhost:27017' => [ServerDescription] },
    stale: false,
    compatible: true,
    heartbeatFrequencyMS: 10000,
    localThresholdMS: 15,
    setName: null,
    maxElectionId: null,
    maxSetVersion: null,
    commonWireVersion: 0,
    logicalSessionTimeoutMinutes: null
  },
  code: undefined,
  [cause]: MongoNetworkError: connect ECONNREFUSED ::1:27017, connect ECONNREFUSED 127.0.0.1:27017
      at Socket.<anonymous> (/home/ken/neura_dazzle/dazzle/app/server/node_modules/mongodb/lib/cmap/connect.js:297:44)
      at Object.onceWrapper (node:events:623:12)
      at Socket.emit (node:events:508:20)
      at emitErrorNT (node:internal/streams/destroy:170:8)
      at emitErrorCloseNT (node:internal/streams/destroy:129:3)
      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
    errorLabelSet: Set(3) { 'SystemOverloadedError', 'RetryableError', 'ResetPool' },
    beforeHandshake: false,
    [cause]: AggregateError [ECONNREFUSED]: 
        at internalConnectMultiple (node:net:1134:18)
        at afterConnectMultiple (node:net:1715:7) {
      code: 'ECONNREFUSED',
      [errors]: [Array]
    }
  }
}
âš ï¸ Using in-memory fallback database (data will be lost on restart)
âŒ Error initializing default data: TypeError: db.collection(...).insertMany is not a function
    at initializeDefaultData (/home/ken/neura_dazzle/dazzle/app/server/database.js:217:45)
    at async connectDatabase (/home/ken/neura_dazzle/dazzle/app/server/database.js:50:5)
    at async startServer (/home/ken/neura_dazzle/dazzle/app/server/index.js:2091:5)
âœ… Database connected successfully

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          Bharat Biz-Agent - Bot Server                   â•‘
â•‘                                                          â•‘
â•‘  ğŸ” Encryption:    AES-256-GCM Enabled                   â•‘
â•‘  ğŸ“± WhatsApp:      âœ… Configured  
â•‘  âœˆï¸  Telegram:     âœ… Configured  
â•‘  ğŸ”‘ Admin API:     âœ… Configured  
â•‘  ğŸ¤– AI Service:    âœ… Configured  
â•‘  ğŸ’¾ Database:      âœ… Connected                           â•‘
â•‘                                                          â•‘
â•‘  ğŸŒ Server:        http://localhost:3002              â•‘
â•‘  ğŸ’š Health:        http://localhost:3002/health       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
[INFO] Server Started: Server listening on port 3002
Error fetching activity data: TypeError: ApprovalOperations.getByDateRange is not a function
    at /home/ken/neura_dazzle/dazzle/app/server/index.js:1868:26
    at Layer.handle [as handle_request] (/home/ken/neura_dazzle/dazzle/app/server/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/ken/neura_dazzle/dazzle/app/server/node_modules/express/lib/router/route.js:149:13)
    at authenticateApiKey (/home/ken/neura_dazzle/dazzle/app/server/index.js:72:3)
    at Layer.handle [as handle_request] (/home/ken/neura_dazzle/dazzle/app/server/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/ken/neura_dazzle/dazzle/app/server/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/ken/neura_dazzle/dazzle/app/server/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/ken/neura_dazzle/dazzle/app/server/node_modules/express/lib/router/layer.js:95:5)
    at /home/ken/neura_dazzle/dazzle/app/server/node_modules/express/lib/router/index.js:284:15
    at router.process_params (/home/ken/neura_dazzle/dazzle/app/server/node_modules/express/lib/router/index.js:346:12)
    at next (/home/ken/neura_dazzle/dazzle/app/server/node_modules/express/lib/router/index.js:280:10)
    at /home/ken/neura_dazzle/dazzle/app/server/node_modules/express-rate-limit/dist/index.cjs:807:7
    at process.processTicksAndRejections (node:internal/process/task_queues:104:5)
    at async /home/ken/neura_dazzle/dazzle/app/server/node_modules/express-rate-limit/dist/index.cjs:691:5
Error fetching activity data: TypeError: ApprovalOperations.getByDateRange is not a function
    at /home/ken/neura_dazzle/dazzle/app/server/index.js:1868:26
    at Layer.handle [as handle_request] (/home/ken/neura_dazzle/dazzle/app/server/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/ken/neura_dazzle/dazzle/app/server/node_modules/express/lib/router/route.js:149:13)
    at authenticateApiKey (/home/ken/neura_dazzle/dazzle/app/server/index.js:72:3)
    at Layer.handle [as handle_request] (/home/ken/neura_dazzle/dazzle/app/server/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/ken/neura_dazzle/dazzle/app/server/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/ken/neura_dazzle/dazzle/app/server/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/ken/neura_dazzle/dazzle/app/server/node_modules/express/lib/router/layer.js:95:5)
    at /home/ken/neura_dazzle/dazzle/app/server/node_modules/express/lib/router/index.js:284:15
    at router.process_params (/home/ken/neura_dazzle/dazzle/app/server/node_modules/express/lib/router/index.js:346:12)
    at next (/home/ken/neura_dazzle/dazzle/app/server/node_modules/express/lib/router/index.js:280:10)
    at /home/ken/neura_dazzle/dazzle/app/server/node_modules/express-rate-limit/dist/index.cjs:807:7
    at process.processTicksAndRejections (node:internal/process/task_queues:104:5)
    at async /home/ken/neura_dazzle/dazzle/app/server/node_modules/express-rate-limit/dist/index.cjs:691:5
Debugger listening on ws://127.0.0.1:9229/a6dceec9-6687-4187-b642-01a4d9e82b92
For help, see: https://nodejs.org/en/docs/inspector
